<!-- Main App Container -->
<div class="min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
  
  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="fixed inset-0 bg-white dark:bg-gray-900 bg-opacity-90 dark:bg-opacity-90 flex items-center justify-center z-50">
    <div class="text-center">
      <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"></div>
      <p class="mt-4 text-gray-600 dark:text-gray-300 text-lg">Initializing application...</p>
    </div>
  </div>

  <!-- Initialization Error -->
  <div *ngIf="initializationError && !isLoading" class="fixed inset-0 bg-white dark:bg-gray-900 bg-opacity-90 dark:bg-opacity-90 flex items-center justify-center z-50">
    <div class="text-center bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg border border-red-200 dark:border-red-700 max-w-md mx-4">
      <div class="text-red-600 dark:text-red-400 mb-4">
        <svg class="mx-auto h-16 w-16" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
        </svg>
      </div>
      <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Initialization Error</h3>
      <p class="text-gray-600 dark:text-gray-300 mb-4">{{ initializationError }}</p>
      <button 
        (click)="ngOnInit()" 
        class="bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white px-6 py-2 rounded-md transition-colors">
        Retry
      </button>
    </div>
  </div>

  <!-- Router Outlet for displaying different pages -->
  <router-outlet *ngIf="!isLoading && !initializationError"></router-outlet>
  
  <!-- Global Loading Component -->
  <app-global-loading></app-global-loading>
</div>
