<div [ngClass]="containerClass()">
  
  <!-- Sidebar Overlay for Mobile -->
  <div *ngIf="isMobile() && !isSidebarCollapsed()" 
       class="fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden transition-opacity duration-300"
       (click)="closeSidebarOnMobile()">
  </div>

  <!-- Sidebar -->
  <aside [ngClass]="sidebarClass()">
    <app-sidebar 
      [isCollapsed]="isSidebarCollapsed"
      [userRoles]="userRoles()"
      [isDarkMode]="isDarkMode()"
      (toggleSidebar)="toggleSidebar()"
      (logout)="handleLogout()">
    </app-sidebar>
  </aside>

  <!-- Main Content Area -->
  <div [ngClass]="mainContentClass()">
    
    <!-- Header -->
    <app-header 
      [user]="headerUserProfile"
      [notifications]="notifications"
      [isDarkMode]="isDarkMode()"
      (toggleSidebar)="toggleSidebar()"
      (toggleDarkMode)="toggleDarkMode()"
      (logout)="handleLogout()">
    </app-header>

    <!-- Main Content -->
    <main [ngClass]="themeService.getClasses().main + ' flex-1 overflow-auto'">
      <div [ngClass]="layoutService.getContainerClasses()">
        <router-outlet></router-outlet>
      </div>
    </main>

    <!-- Footer (Optional) -->
    <footer [ngClass]="themeService.getClasses().footer + ' border-t px-4 py-3 lg:px-6'">
      <div class="flex flex-col sm:flex-row justify-between items-center text-sm text-gray-600 dark:text-gray-400">
        <div class="flex items-center space-x-4">
          <span>&copy; 2025 MicroBiz Hub. All rights reserved.</span>
          <span>•</span>
          <a href="#" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Privacy Policy</a>
          <span>•</span>
          <a href="#" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Terms of Service</a>
        </div>
        
        <div class="flex items-center space-x-4 mt-2 sm:mt-0">
          <span>Version 1.0.0</span>
          <span>•</span>
          <a href="#" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Support</a>
        </div>
      </div>
    </footer>
  </div>
</div>
