<div class="flex h-screen overflow-hidden bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
  
  <!-- Sidebar Overlay for Mobile -->
  <div *ngIf="isMobile() && !isSidebarCollapsed()" 
       class="fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden transition-opacity duration-300"
       (click)="closeSidebarOnMobile()">
  </div>

  <!-- Sidebar -->
  <aside [ngClass]="sidebarClass()">
    <app-sidebar 
      [isCollapsed]="isSidebarCollapsed"
      [userRoles]="userRoles()"
      [isDarkMode]="isDarkMode()"
      (toggleSidebar)="toggleSidebar()"
      (logout)="handleLogout()">
    </app-sidebar>
  </aside>

  <!-- Main Content Area -->
  <div [ngClass]="mainContentClass()">
    
    <!-- Header -->
    <app-header 
      [user]="headerUserProfile"
      [notifications]="notifications"
      [isDarkMode]="isDarkMode()"
      (toggleSidebar)="toggleSidebar()"
      (toggleDarkMode)="toggleDarkMode()"
      (logout)="handleLogout()">
    </app-header>

    <!-- Main Content -->
    <main class="flex-1 overflow-auto transition-colors duration-300">
      <div class="min-h-full bg-gray-50 dark:bg-gray-900">
        <div [ngClass]="layoutService.getContainerClasses()">
          <router-outlet></router-outlet>
        </div>
      </div>
    </main>

    <!-- Footer (Optional) -->
    <footer class="mt-auto border-t border-gray-200 dark:border-gray-700 transition-colors duration-300">
      <div class="px-4 py-3 lg:px-6 bg-white dark:bg-gray-800">
        <div class="flex flex-col sm:flex-row justify-between items-center text-sm">
          <div class="flex items-center space-x-4">
            <span class="text-gray-600 dark:text-gray-400">&copy; 2025 MicroBiz Hub. All rights reserved.</span>
            <span class="text-gray-600 dark:text-gray-400">•</span>
            <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Privacy Policy</a>
            <span class="text-gray-600 dark:text-gray-400">•</span>
            <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Terms of Service</a>
          </div>
          <div class="flex items-center space-x-4 mt-2 sm:mt-0">
            <span class="text-gray-600 dark:text-gray-400">Version 1.0.0</span>
            <span class="text-gray-600 dark:text-gray-400">•</span>
            <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Support</a>
          </div>
        </div>
      </div>
    </footer>
  </div>
</div>
