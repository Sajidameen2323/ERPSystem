<div class="bg-white shadow-sm border border-gray-200 rounded-lg overflow-hidden">
  
  <!-- Table Header -->
  <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0">
      
      <!-- Search and Filters -->
      <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3">
        
        <!-- Search -->
        <div *ngIf="searchable" class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <lucide-angular [img]="SearchIcon" class="w-5 h-5 text-gray-400"></lucide-angular>
          </div>
          <input 
            type="text"
            [(ngModel)]="searchTerm"
            placeholder="Search..."
            class="w-full sm:w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
        </div>

        <!-- Filter Button -->
        <button *ngIf="filterable"
                class="inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:ring-2 focus:ring-blue-500">
          <lucide-angular [img]="FilterIcon" class="w-4 h-4 mr-2"></lucide-angular>
          Filter
        </button>
      </div>

      <!-- Action Buttons -->
      <div class="flex items-center space-x-2">
        
        <!-- Refresh Button -->
        <button (click)="onRefresh()"
                class="inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 transition-colors">
          <lucide-angular [img]="RefreshIcon" class="w-4 h-4"></lucide-angular>
        </button>

        <!-- Export Button -->
        <button *ngIf="exportable"
                (click)="onExport()"
                class="inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 transition-colors">
          <lucide-angular [img]="DownloadIcon" class="w-4 h-4 mr-2"></lucide-angular>
          Export
        </button>

        <!-- Add Button -->
        <button *ngIf="showAddButton"
                (click)="onAdd()"
                class="inline-flex items-center px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 transition-colors">
          <lucide-angular [img]="PlusIcon" class="w-4 h-4 mr-2"></lucide-angular>
          {{ addButtonLabel }}
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="flex items-center justify-center py-12">
    <div class="flex items-center space-x-3">
      <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div>
      <span class="text-sm text-gray-600">Loading...</span>
    </div>
  </div>

  <!-- Table -->
  <div *ngIf="!loading" class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
      
      <!-- Table Head -->
      <thead class="bg-gray-50">
        <tr>
          <!-- Select All Checkbox -->
          <th *ngIf="selectable" class="px-6 py-3 text-left">
            <input type="checkbox"
                   [checked]="isAllSelected"
                   [indeterminate]="isIndeterminate"
                   (change)="selectAll()"
                   class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
          </th>

          <!-- Column Headers -->
          <th *ngFor="let column of columns"
              [style.width]="column.width"
              class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
            
            <button *ngIf="column.sortable; else nonSortableHeader"
                    (click)="onSort(column)"
                    class="flex items-center space-x-1 hover:text-gray-700 transition-colors">
              <span>{{ column.label }}</span>
              <svg class="w-4 h-4" 
                   [class.text-blue-600]="sortColumn === column.key"
                   fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path *ngIf="sortColumn !== column.key || sortDirection === 'asc'"
                      stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M7 10l5 5 5-5"></path>
                <path *ngIf="sortColumn === column.key && sortDirection === 'desc'"
                      stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M7 14l5-5 5 5"></path>
              </svg>
            </button>

            <ng-template #nonSortableHeader>
              {{ column.label }}
            </ng-template>
          </th>

          <!-- Actions Column -->
          <th *ngIf="actions.length > 0" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
            Actions
          </th>
        </tr>
      </thead>

      <!-- Table Body -->
      <tbody class="bg-white divide-y divide-gray-200">
        
        <!-- Data Rows -->
        <tr *ngFor="let item of paginatedData; trackBy: trackByIndex"
            class="hover:bg-gray-50 transition-colors"
            [class.bg-blue-50]="isSelected(item)">
          
          <!-- Select Checkbox -->
          <td *ngIf="selectable" class="px-6 py-4">
            <input type="checkbox"
                   [checked]="isSelected(item)"
                   (change)="onRowSelect(item)"
                   class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
          </td>

          <!-- Data Cells -->
          <td *ngFor="let column of columns" [ngClass]="getCellClass(column)">
            
            <!-- Status Badge -->
            <span *ngIf="column.type === 'status'" 
                  class="inline-flex px-2 py-1 text-xs font-semibold rounded-full"
                  [ngClass]="getStatusClass(getCellValue(item, column))">
              {{ getCellValue(item, column) }}
            </span>

            <!-- Regular Cell -->
            <span *ngIf="column.type !== 'status'" 
                  [ngClass]="column.type === 'number' || column.type === 'currency' ? 'font-mono' : ''">
              {{ getCellValue(item, column) }}
            </span>
          </td>

          <!-- Actions -->
          <td *ngIf="actions.length > 0" class="px-6 py-4 text-center">
            <div class="flex items-center justify-center space-x-2">
              <button *ngFor="let action of actions"
                      (click)="onActionClick(action.action, item)"
                      [disabled]="action.disabled"
                      [title]="action.label"
                      class="inline-flex items-center p-1 border border-transparent rounded text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                      [ngClass]="action.class || ''">
                <lucide-angular *ngIf="action.icon" [img]="action.icon" class="w-4 h-4"></lucide-angular>
                <span *ngIf="!action.icon" class="text-xs">{{ action.label }}</span>
              </button>
            </div>
          </td>
        </tr>

        <!-- Empty State -->
        <tr *ngIf="paginatedData.length === 0">
          <td [attr.colspan]="columns.length + (selectable ? 1 : 0) + (actions.length > 0 ? 1 : 0)"
              class="px-6 py-12 text-center text-sm text-gray-500">
            <div class="flex flex-col items-center">
              <svg class="w-12 h-12 text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
              </svg>
              <p class="font-medium">{{ emptyMessage }}</p>
              <p class="text-gray-400 mt-1">Get started by adding a new item.</p>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div *ngIf="!loading && totalPages > 1" 
       class="px-6 py-3 border-t border-gray-200 bg-gray-50">
    <div class="flex items-center justify-between">
      
      <!-- Results Info -->
      <div class="text-sm text-gray-700">
        Showing {{ ((currentPage - 1) * itemsPerPage) + 1 }} to 
        {{ Math.min(currentPage * itemsPerPage, filteredData.length) }} of 
        {{ filteredData.length }} results
      </div>

      <!-- Pagination Controls -->
      <div class="flex items-center space-x-2">
        
        <!-- Previous Button -->
        <button (click)="previousPage()"
                [disabled]="currentPage === 1"
                class="px-3 py-1 border border-gray-300 rounded text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
          Previous
        </button>

        <!-- Page Numbers -->
        <div class="flex items-center space-x-1">
          <button *ngFor="let page of [].constructor(totalPages); let i = index"
                  (click)="goToPage(i + 1)"
                  [class.bg-blue-600]="currentPage === i + 1"
                  [class.text-white]="currentPage === i + 1"
                  [class.text-gray-700]="currentPage !== i + 1"
                  class="px-3 py-1 border border-gray-300 rounded text-sm font-medium bg-white hover:bg-gray-50 transition-colors">
            {{ i + 1 }}
          </button>
        </div>

        <!-- Next Button -->
        <button (click)="nextPage()"
                [disabled]="currentPage === totalPages"
                class="px-3 py-1 border border-gray-300 rounded text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
          Next
        </button>
      </div>
    </div>
  </div>
</div>
